{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vamsi\\\\OneDrive\\\\Documents\\\\Roxiler\\\\frontend\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Formik, Form } from 'formik';\nimport * as Yup from 'yup';\nimport { Container, Paper, Typography, TextField, Button, Box } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst validationSchema = Yup.object({\n  email: Yup.string().email('Invalid email address').required('Email is required'),\n  password: Yup.string().min(8, 'Password must be at least 8 characters').max(16, 'Password must not exceed 16 characters').matches(/^(?=.*[A-Z])(?=.*[!@#$%^&*])/, 'Password must contain at least one uppercase letter and one special character').required('Password is required')\n});\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const handleSubmit = async (values, {\n    setSubmitting,\n    setErrors\n  }) => {\n    try {\n      const response = await axios.post('http://localhost:3001/api/auth/login', values);\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('userRole', response.data.role);\n\n      // Redirect based on role\n      switch (response.data.role) {\n        case 'admin':\n          navigate('/admin');\n          break;\n        case 'store_owner':\n          navigate('/store-owner');\n          break;\n        default:\n          navigate('/user');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setErrors({\n        submit: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed'\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          p: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h1\",\n          gutterBottom: true,\n          align: \"center\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            email: '',\n            password: ''\n          },\n          validationSchema: validationSchema,\n          onSubmit: handleSubmit,\n          children: ({\n            values,\n            errors,\n            touched,\n            handleChange,\n            handleBlur,\n            isSubmitting\n          }) => /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              id: \"email\",\n              name: \"email\",\n              label: \"Email\",\n              value: values.email,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              error: touched.email && Boolean(errors.email),\n              helperText: touched.email && errors.email,\n              margin: \"normal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              id: \"password\",\n              name: \"password\",\n              label: \"Password\",\n              type: \"password\",\n              value: values.password,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              error: touched.password && Boolean(errors.password),\n              helperText: touched.password && errors.password,\n              margin: \"normal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), errors.submit && /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"error\",\n              sx: {\n                mt: 1\n              },\n              children: errors.submit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              fullWidth: true,\n              variant: \"contained\",\n              color: \"primary\",\n              disabled: isSubmitting,\n              sx: {\n                mt: 3\n              },\n              children: isSubmitting ? 'Logging in...' : 'Login'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useNavigate","Formik","Form","Yup","Container","Paper","Typography","TextField","Button","Box","axios","jsxDEV","_jsxDEV","validationSchema","object","email","string","required","password","min","max","matches","Login","_s","navigate","handleSubmit","values","setSubmitting","setErrors","response","post","localStorage","setItem","data","token","role","error","_error$response","_error$response$data","submit","message","maxWidth","children","sx","mt","elevation","p","variant","component","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","initialValues","onSubmit","errors","touched","handleChange","handleBlur","isSubmitting","fullWidth","id","name","label","value","onChange","onBlur","Boolean","helperText","margin","type","color","disabled","_c","$RefreshReg$"],"sources":["C:/Users/vamsi/OneDrive/Documents/Roxiler/frontend/src/pages/Login.js"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\n\r\nconst validationSchema = Yup.object({\r\n  email: Yup.string()\r\n    .email('Invalid email address')\r\n    .required('Email is required'),\r\n  password: Yup.string()\r\n    .min(8, 'Password must be at least 8 characters')\r\n    .max(16, 'Password must not exceed 16 characters')\r\n    .matches(\r\n      /^(?=.*[A-Z])(?=.*[!@#$%^&*])/,\r\n      'Password must contain at least one uppercase letter and one special character'\r\n    )\r\n    .required('Password is required'),\r\n});\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (values, { setSubmitting, setErrors }) => {\r\n    try {\r\n      const response = await axios.post('http://localhost:3001/api/auth/login', values);\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('userRole', response.data.role);\r\n      \r\n      // Redirect based on role\r\n      switch (response.data.role) {\r\n        case 'admin':\r\n          navigate('/admin');\r\n          break;\r\n        case 'store_owner':\r\n          navigate('/store-owner');\r\n          break;\r\n        default:\r\n          navigate('/user');\r\n      }\r\n    } catch (error) {\r\n      setErrors({ submit: error.response?.data?.message || 'Login failed' });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box sx={{ mt: 8 }}>\r\n        <Paper elevation={3} sx={{ p: 4 }}>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\r\n            Login\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{ email: '', password: '' }}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ values, errors, touched, handleChange, handleBlur, isSubmitting }) => (\r\n              <Form>\r\n                <TextField\r\n                  fullWidth\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  label=\"Email\"\r\n                  value={values.email}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  error={touched.email && Boolean(errors.email)}\r\n                  helperText={touched.email && errors.email}\r\n                  margin=\"normal\"\r\n                />\r\n                <TextField\r\n                  fullWidth\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  error={touched.password && Boolean(errors.password)}\r\n                  helperText={touched.password && errors.password}\r\n                  margin=\"normal\"\r\n                />\r\n                {errors.submit && (\r\n                  <Typography color=\"error\" sx={{ mt: 1 }}>\r\n                    {errors.submit}\r\n                  </Typography>\r\n                )}\r\n                <Button\r\n                  type=\"submit\"\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  sx={{ mt: 3 }}\r\n                >\r\n                  {isSubmitting ? 'Logging in...' : 'Login'}\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </Paper>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}